globals().update(sys = __import__("sys")) or globals().update(olp = __import__("olp")) or globals().update(tempchunks = []) or globals().update(parse = lambda string, r: globals().update(temp = []) or globals().update(tradimport = lambda l: (["import "+name if any([name+s+"="+s+"__import__("+q+name+q+")" == l for q in ["\"", "'"] for s in ["", " "]]) else l for name in [l.split("=")[0].strip()]][0]) if "=" in l else l) or globals().update(join = lambda c: globals().update(tmp = [c[i] if c[i].count('(') == c[i].count(')') else (c[i] + " or " + c[i+1] if c[i].count('(') > c[i].count(')') and i+1 < len(c) else c[i]) for i in range(len(c))]) or [tmp[i] for i in range(len(tmp)) if tmp[i] is not None and (i == 0 or tmp[i] not in tmp[i-1])]) or globals().update(cleanchunk = lambda chunk: olp.primitives["while"](locals(), "chunk.strip().startswith('(') and chunk.strip().endswith(')')", "globals().update(chunk = chunk[:chunk.index(chunk.strip())] + chunk.strip()[1:-1])")["chunk"]) or globals().update(parseif = lambda c: globals().update(tmp = []) or [tmp.append(i[i.rindex("if"):-11]+":") or tmp.append("    "+i[:i.rindex("if")]) if i.endswith("else False") else tmp.append(i) for i in c][0] or tmp) or globals().update(parsequit = lambda c: globals().update(tmp = []) or [tmp.append(i[:-7]) or tmp.append(i[:i.index(i.strip())] + "quit() # may be return if in a function") if i.endswith("or True") else tmp.append(i) for i in c][0] or tmp) or globals().update(parsefor = lambda c: globals().update(tmp = []) or tmp) or (locals().update(chunks = string.split(" or ")) or globals().update(joinloop = olp.primitives["dowhile"](locals() | globals(), "chunks != temp", "globals().update(temp = chunks) or globals().update(chunks = join(chunks))")) or locals().update(chunks = joinloop["chunks"]) or locals().update(chunks = [cleanchunk(chunk) for chunk in locals()["chunks"]]) or locals().update(chunks = parseif(locals()["chunks"])) or locals().update(chunks = [cleanchunk(chunk) for chunk in locals()["chunks"]]) or locals().update(chunks = parsequit(locals()["chunks"])) or (([([tempchunks.append(c[:c.index(c.strip())]+line) for line in parse(c.strip(), r + 1)][0] if " or " in c and not c.startswith("if") else tempchunks.append(c)) for c in locals()["chunks"]] if r == 0 else print(locals()["chunks"])) or print(str(r) + "\n" + str(tempchunks) + "\n" + str(locals()["chunks"]))) or print(r) or globals().update(lines = [chunk[:chunk.index(chunk.strip())]+tradimport(chunk.strip()[17:-1]) if chunk.strip().startswith("globals().update(") else (cleanchunk(chunk) if chunk.strip().startswith("(") else chunk) for chunk in locals()["chunks"]])) or lines) or ((print("Usage: oldec <file>") or True) if len(sys.argv) < 2 else False) or [print(line) for line in parse(open(sys.argv[1], 'r').read(), 0)]
